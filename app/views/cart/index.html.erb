<h1>Your Cart</h1>

<section class="cart-show-grid">
  <% cart.cart_items.each do |item| %>
  <section id="item-<%=item.id%>">
    <h3><%= item.name %></h3>
    <img src= <%= item.image %>>
    <p>Sold by: <%= item.merchant.name %></p>
    <p>Price: $<%= item.price %></p>
    <span><%= button_to 'Subtract', "/cart/#{item.id}/remove", method: :patch %>
    <p>Quantity: <%= cart.count_of(item.id) %></p>
    <%= button_to 'Add', "/cart/#{item.id}/add", method: :patch %></span>
    <p>Subtotal: $<%= cart.sub_total(item) %></p>
    <%= link_to 'Remove Item', "/cart/#{item.id}", method: :delete %>
  </section>
  <% end %>
</section>
<section id="cart-footer">
<% if cart.contents == {} %>
<% else %>
  <%= link_to 'Empty Cart', '/cart/', method: :delete %>
<% end %>
<h2>Grand Total: $<%= cart.grand_total %></h2>
<% if cart.grand_total > 0 %>
  <%= button_to 'Checkout', '/order', method: :get %>
<% end %>
</section>
